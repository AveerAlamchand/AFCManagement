USE AFCManagement;
CREATE TABLE FOOTBALLCLUB(
	ClubID VARCHAR(8) NOT NULL,
	ClubName VARCHAR(40),
	Country VARCHAR(20),
	FoundingYear INT,
	PRIMARY KEY(ClubID)
);
CREATE TABLE PRESIDENT(
	PresIDNumber VARCHAR(13) NOT NULL,
	Name VARCHAR(20),
	Surname VARCHAR(20),
	CountryOfOrgin VARCHAR(20),
	DateOfBirth DATE,
	ClubID VARCHAR(8) NOT NULL,
	PRIMARY KEY(PresIDNumber),
	FOREIGN KEY(ClubID) REFERENCES FOOTBALLCLUB(ClubID)
);
CREATE TABLE STADIUM(
	StadiumID VARCHAR(8) NOT NULL,
	StadiumName VARCHAR(30),
	StadiumCapactiy INT,
	Location VARCHAR(30),
	PRIMARY KEY(StadiumID)
);
CREATE TABLE MATCHES(
	MatchID VARCHAR(8) NOT NULL,
	StadiumID VARCHAR(8) NOT NULL,
	HomeOrAway VARCHAR(4),
	Result VARCHAR(4),
	Coach VARCHAR(20),
	DateOfMatch DATE,
	StartTime TIME,
	PRIMARY KEY(MatchID),
	FOREIGN KEY(StadiumID) REFERENCES STADIUM(StadiumID)
);
CREATE TABLE TABLELOG(
	LogID VARCHAR(8) NOT NULL,
	ClubID VARCHAR(8) NOT NULL,
	Season VARCHAR(5),
	MatchID VARCHAR(8) NOT NULL,
	Position INT,
	PRIMARY KEY(LogID),
	FOREIGN KEY(ClubID) REFERENCES FOOTBALLCLUB(ClubID),
	FOREIGN KEY(MatchID) REFERENCES MATCHES(MatchID)
);
CREATE TABLE COMPETITON(
	CompetitonID VARCHAR(8) NOT NULL,
	Name VARCHAR(20),
	Season VARCHAR(5),
	NumberOfTeams INT, 
	GoverningBody VARCHAR(15),
	CurrentChampions VARCHAR(20),
	LogID VARCHAR(8) NOT NULL,
	PRIMARY KEY(CompetitonID),
	FOREIGN KEY(LogID) REFERENCES TABLELOG(LogID)
);
CREATE TABLE LEAGUE(
	CompetitonID VARCHAR(8) NOT NULL,
	TransferWindowStartDate DATE,
	TransferWindowEndDate DATE,
	SpendingLimit FLOAT,
	FOREIGN KEY(CompetitonID) REFERENCES COMPETITON(CompetitonID) ON DELETE CASCADE
);
CREATE TABLE CONTINENTAL(
	CompetitonID VARCHAR(8) NOT NULL,
	CountryAssociation VARCHAR(20),
	FinalCountry VARCHAR(20),
	FinalStadium VARCHAR(30),
	FOREIGN KEY(CompetitonID) REFERENCES COMPETITON(CompetitonID) ON DELETE CASCADE
);
CREATE TABLE CLUBSCOMPETITON(
	CC_ID VARCHAR(8) NOT NULL,
	CompetitonID VARCHAR(8) NOT NULL,
	ClubID VARCHAR(8) NOT NULL,
	Matches INT,
	Ranking INT,
	PRIMARY KEY (CC_ID),
	FOREIGN KEY (CompetitonID) REFERENCES COMPETITON(CompetitonID),
	FOREIGN KEY(ClubID) REFERENCES FOOTBALLCLUB(ClubID)
);
CREATE TABLE STORES(
	StoreID VARCHAR(8) NOT NULL,
	StoreNetIncome FLOAT NOT NULL,
	StoreName VARCHAR(20),
	YearEstablished DATE,
	UnitOfBuilding VARCHAR(2),
	Manager VARCHAR(20),
	NumberOfStaff INT,
	Month VARCHAR(9),
	Year INT,
	StadiumID VARCHAR(8) NOT NULL,
	PRIMARY KEY(StoreID,StoreNetIncome),
	FOREIGN KEY(StadiumID) REFERENCES STADIUM(StadiumID)
);
CREATE TABLE MERCHANDISE(
	StoreID VARCHAR(8) NOT NULL,
	SeasonKits VARCHAR(5),
	TypeOfKit VARCHAR(6),
	TotalStockAvailable INT,
	Price FLOAT,
	FOREIGN KEY(StoreID) REFERENCES STORES(StoreID) ON DELETE CASCADE
)
CREATE TABLE TICKETBOOTH(
	StoreID VARCHAR(8) NOT NULL,
	TypeOfTicket VARCHAR(10),
	SeatNumber INT,
	Price FLOAT,
	FOREIGN KEY(StoreID) REFERENCES STORES(StoreID) ON DELETE CASCADE
);
CREATE TABLE FAN(
	IDNumber VARCHAR(13) NOT NULL,
	Name VARCHAR(20),
	Surname VARCHAR(20),
	DateOfBirth DATE,
	PRIMARY KEY(IDNumber)
);
CREATE TABLE PAYMENT(
	PaymentNumber VARCHAR(8) NOT NULL,
	Amount FLOAT,
	DateOfPayment DATE,
	TimeOfPayment TIME,
	Product VARCHAR(80),
	IDNumber VARCHAR(13) NOT NULL,
	StoreID VARCHAR(8) NOT NULL,
	PRIMARY KEY(PaymentNumber),
	FOREIGN KEY(IDNumber) REFERENCES FAN(IDNumber) ON DELETE CASCADE,
	FOREIGN KEY(StoreID) REFERENCES STORES(StoreID) ON DELETE CASCADE
);
CREATE TABLE SPORTINGDIRECTOR(
	SportID VARCHAR(8) NOT NULL,
	SportNetSpend FLOAT NOT NULL,
	Name VARCHAR(20),
	Surname VARCHAR(20),
	LastClub VARCHAR(20),
	TransferBudget FLOAT,
	Year INT,
	Month VARCHAR(9),
	PRIMARY KEY(SportID,SportNetSpend)
);
CREATE TABLE ACCOUNTANT(
	AccID VARCHAR(8) NOT NULL,
	TeamMarketValue FLOAT,
	Name VARCHAR(20),
	Surname VARCHAR(20),
	Age INT,
	Month VARCHAR(9),
	Year INT,
	NetProfit FLOAT,
	StoreID VARCHAR(8) NOT NULL,
	SportID VARCHAR(8) NOT NULL,
	PRIMARY KEY(AccID),
	FOREIGN KEY(StoreID) REFERENCES STORES(StoreID),
	FOREIGN KEY(SportID) REFERENCES SPORTINGDIRECTOR(SportID)
);
CREATE TABLE REPORT(
	AccID VARCHAR(8) NOT NULL,
	PresIDNumber VARCHAR(13) NOT NULL,
	DateOfReport DATE NOT NULL,
	Amount FLOAT,
	PRIMARY KEY(AccID,PresIDNumber,DateOfReport),
	FOREIGN KEY(AccID) REFERENCES ACCOUNTANT(AccID),
	FOREIGN KEY(PresIDNumber) REFERENCES PRESIDENT(PresIDNumber)
);
DROP TABLE IF EXISTS PLAYER;
CREATE TABLE PLAYER(
	PIDNumber VARCHAR(8) NOT NULL,
	Name VARCHAR(20),
	Surname VARCHAR(20),
	Age INT,
	Position VARCHAR(30),
	MarketValue FLOAT,
	PRIMARY KEY(PIDNumber)
);
CREATE TABLE OTHERPLAYER(
	PIDNumber VARCHAR(8) NOT NULL,
	LastClub VARCHAR(20),
	ReleaseClause FLOAT,
	SportID VARCHAR(8) NOT NULL,
	FOREIGN KEY(SportID) REFERENCES SPORTINGDIRECTOR(SportID),
	FOREIGN KEY(PIDNumber) REFERENCES PLAYER(PIDNumber) ON DELETE CASCADE
);
CREATE TABLE CLUBPLAYER(
	PIDNumber VARCHAR(8) NOT NULL,
	ShirtNumber INT,
	ClubID VARCHAR(8) NOT NULL,
	PRIMARY KEY(PIDNumber),
	FOREIGN KEY(ClubID) REFERENCES FOOTBALLCLUB(ClubID) ON DELETE CASCADE,
	FOREIGN KEY(PIDNumber) REFERENCES PLAYER(PIDNumber) ON DELETE CASCADE
);
CREATE TABLE PLAYERSTAFF(
	StaffNumber VARCHAR(8) NOT NULL,
	Name VARCHAR(20),
	Surname VARCHAR(20),
	Age INT,
	PRIMARY KEY(StaffNumber)
);
CREATE TABLE MEDICALSTAFF(
	StaffNumber VARCHAR(8) NOT NULL,
	Qualification VARCHAR(60),
	Practice VARCHAR(20),
	FOREIGN KEY(StaffNumber) REFERENCES PLAYERSTAFF(StaffNumber) ON DELETE CASCADE
);
CREATE TABLE TRAININGSTAFF(
	StaffNumber VARCHAR(8) NOT NULL,
	Position VARCHAR(20),
	CoachingDegree VARCHAR(30),
	FOREIGN KEY(StaffNumber) REFERENCES PLAYERSTAFF(StaffNumber) ON DELETE CASCADE
);
CREATE TABLE APPOINTMENT(
	DateOfAppointment DATE NOT NULL,
	StaffNumber VARCHAR(8) NOT NULL,
	PIDNumber VARCHAR(8) NOT NULL,
	Description VARCHAR(50),
	PRIMARY KEY(DateOfAppointment,StaffNumber,PIDNumber),
	FOREIGN KEY(StaffNumber) REFERENCES PLAYERSTAFF(StaffNumber),
	FOREIGN KEY(PIDNumber) REFERENCES PLAYER(PIDNumber) 
);

show tables;